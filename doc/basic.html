<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.2">
    <meta name="project" content="Journey v0.10.31">


    <title>Building a resilient application with Journey — Journey v0.10.31</title>

    <link rel="stylesheet" href="dist/html-elixir-KV3YOVJ3.css" />

    <script defer src="dist/sidebar_items-8DE7E386.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="Journey.html" class="sidebar-projectName" translate="no">
Journey
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.10.31
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-livemd" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Journey</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Building a resilient application with Journey</h1>


  </div>

    <div class="livebook-badge-container">
      <a href="#" class="livebook-badge">
        <img src="https://livebook.dev/badge/v1/blue.svg" alt="Run in Livebook" width="150" />
      </a>
    </div>


<pre><code class="makeup elixir" translate="no"><span class="c1"># [Optional] Setting Build Key, see https://gojourney.dev/your_keys</span><span class="w">
</span><span class="c1"># (Using &quot;Journey Livebook Demo&quot; build key)</span><span class="w">
</span><span class="nc">System</span><span class="o">.</span><span class="n">put_env</span><span class="p" data-group-id="2609861726-1">(</span><span class="s">&quot;JOURNEY_BUILD_KEY&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;B27AXHMERm2Z6ehZhL49v&quot;</span><span class="p" data-group-id="2609861726-1">)</span><span class="w">

</span><span class="nc">Mix</span><span class="o">.</span><span class="n">install</span><span class="p" data-group-id="2609861726-2">(</span><span class="w">
  </span><span class="p" data-group-id="2609861726-3">[</span><span class="w">
    </span><span class="p" data-group-id="2609861726-4">{</span><span class="ss">:ecto_sql</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 3.10&quot;</span><span class="p" data-group-id="2609861726-4">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="2609861726-5">{</span><span class="ss">:postgrex</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 0.21&quot;</span><span class="p" data-group-id="2609861726-5">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="2609861726-6">{</span><span class="ss">:jason</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 1.4&quot;</span><span class="p" data-group-id="2609861726-6">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="2609861726-7">{</span><span class="ss">:journey</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 0.10&quot;</span><span class="p" data-group-id="2609861726-7">}</span><span class="p">,</span><span class="w">
    </span><span class="c1"># {:journey, path: Path.join([__DIR__, &quot;../..&quot;])},</span><span class="w">
    </span><span class="p" data-group-id="2609861726-8">{</span><span class="ss">:kino_vega_lite</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 0.1.11&quot;</span><span class="p" data-group-id="2609861726-8">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="2609861726-9">{</span><span class="ss">:kino</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 0.16.1&quot;</span><span class="p" data-group-id="2609861726-9">}</span><span class="w">
  </span><span class="p" data-group-id="2609861726-3">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">start_applications</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
</span><span class="p" data-group-id="2609861726-2">)</span><span class="w">

</span><span class="nc">Application</span><span class="o">.</span><span class="n">put_env</span><span class="p" data-group-id="2609861726-10">(</span><span class="ss">:journey</span><span class="p">,</span><span class="w"> </span><span class="ss">:log_level</span><span class="p">,</span><span class="w"> </span><span class="ss">:warning</span><span class="p" data-group-id="2609861726-10">)</span><span class="w">

</span><span class="c1"># Update this configuration to point to your database server</span><span class="w">
</span><span class="c1"># (to create the database, run `mix ecto.create` from the root of the repo).</span><span class="w">
</span><span class="nc">Application</span><span class="o">.</span><span class="n">put_env</span><span class="p" data-group-id="2609861726-11">(</span><span class="ss">:journey</span><span class="p">,</span><span class="w"> </span><span class="nc">Journey.Repo</span><span class="p">,</span><span class="w">
  </span><span class="ss">database</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;journey_dev&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">username</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;postgres&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;postgres&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">hostname</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;localhost&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">log</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w">
  </span><span class="ss">port</span><span class="p">:</span><span class="w"> </span><span class="mi">5432</span><span class="w">
</span><span class="p" data-group-id="2609861726-11">)</span><span class="w">

</span><span class="nc">Application</span><span class="o">.</span><span class="n">put_env</span><span class="p" data-group-id="2609861726-12">(</span><span class="ss">:journey</span><span class="p">,</span><span class="w"> </span><span class="ss">:ecto_repos</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2609861726-13">[</span><span class="nc">Journey.Repo</span><span class="p" data-group-id="2609861726-13">]</span><span class="p" data-group-id="2609861726-12">)</span><span class="w">

</span><span class="nc">Application</span><span class="o">.</span><span class="n">loaded_applications</span><span class="p" data-group-id="2609861726-14">(</span><span class="p" data-group-id="2609861726-14">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="2609861726-15">(</span><span class="k" data-group-id="2609861726-16">fn</span><span class="w"> </span><span class="p" data-group-id="2609861726-17">{</span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="2609861726-17">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="k" data-group-id="2609861726-16">end</span><span class="p" data-group-id="2609861726-15">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="2609861726-18">(</span><span class="o">&amp;</span><span class="nc">Application</span><span class="o">.</span><span class="n">ensure_all_started</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="2609861726-18">)</span></code></pre><h2 id="getting-things-done-with-journey" class="section-heading"><a href="#getting-things-done-with-journey" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Getting things done with Journey</span></h2><p>This livebook shows using Journey for a ridiculously basic flow: computing the sum of two numbers, and determining whether the sum exceeds a threshold. It has two input values (<code class="inline">x</code> and <code class="inline">y</code>) and two computations (<code class="inline">sum</code> and <code class="inline">large_value_alert</code>).</p><p>This livebook shows creating a blueprint (graph) for computing the sum and large_value_alert, and then executing an instance of the blueprint to perform computations for a particular set of inputs.</p><p>A few things to note:</p><ul><li>every input value (<code class="inline">:x</code>, <code class="inline">:y</code>), or computation result (<code class="inline">:sum</code>, <code class="inline">:large_value_alert</code>) is persisted,</li><li>the two computations<ul><li>happen reliably (their functions are executed with a retry policy),</li><li>are as horizontally distributed as your app is (the functions will run wherever your app runs),</li><li>are proactive (<code class="inline">:sum</code> will be computed when <code class="inline">:x</code> and <code class="inline">:y</code> become available, and <code class="inline">:large_value_alert</code> will be computed when <code class="inline">:sum</code> is available).</li></ul></li><li>executions of this flow can be as long-running as needed (milliseconds? months?), and will live through system restarts, crashes, redeployments, page reloads, etc.</li></ul><p>These attributes – reliability, scalability, and persistence – come without the need to subscribe to an online service, or ship your application's data to a third party, or to deploy any additional infrastructure. Just your application, using a package, storing data in your database, and running as it normally would.</p><h2 id="define-the-blueprint-of-the-application" class="section-heading"><a href="#define-the-blueprint-of-the-application" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Define the Blueprint of the Application</span></h2><p>Our application is very simple, given two numbers, it computes the sum, and sets an alert if the sum is &quot;too large&quot;.</p><h2 id="business-logic-f_add-x-y" class="section-heading"><a href="#business-logic-f_add-x-y" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">&quot;Business logic&quot;: <code class="inline">f_add(x, y)</code></span></h2><pre><code class="makeup elixir" translate="no"><span class="c1"># The function for adding two numbers. Part of the &quot;business logic&quot; of this application.</span><span class="w">
</span><span class="n">f_add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="7372103838-1">fn</span><span class="w"> </span><span class="p" data-group-id="7372103838-2">%{</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="n">y</span><span class="p" data-group-id="7372103838-2">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="7372103838-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p" data-group-id="7372103838-3">}</span><span class="w"> </span><span class="k" data-group-id="7372103838-1">end</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="2345333490-1">#</span><span class="nc" data-group-id="2345333490-1">Function</span><span class="p" data-group-id="2345333490-1">&lt;</span><span class="mf">42.81571850</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">:erl_eval</span><span class="o">.</span><span class="n">expr</span><span class="o">/</span><span class="mi">6</span><span class="p" data-group-id="2345333490-1">&gt;</span></code></pre><h2 id="the-flow" class="section-heading"><a href="#the-flow" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">The flow</span></h2><p>A journey graph is the blueprint for this application. It defines its inputs and computed values exist, their dependencies, and attaches functions to self-computing values.</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node.Conditions</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node.UpstreamDependencies</span><span class="w">

</span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="6224854124-1">(</span><span class="w">
  </span><span class="c1"># graph name.</span><span class="w">
  </span><span class="s">&quot;g1&quot;</span><span class="p">,</span><span class="w">
  </span><span class="c1"># graph version.</span><span class="w">
  </span><span class="s">&quot;v1&quot;</span><span class="p">,</span><span class="w">
  </span><span class="c1"># graph nodes.</span><span class="w">
  </span><span class="p" data-group-id="6224854124-2">[</span><span class="w">
    </span><span class="n">input</span><span class="p" data-group-id="6224854124-3">(</span><span class="ss">:x</span><span class="p" data-group-id="6224854124-3">)</span><span class="p">,</span><span class="w">
    </span><span class="n">input</span><span class="p" data-group-id="6224854124-4">(</span><span class="ss">:y</span><span class="p" data-group-id="6224854124-4">)</span><span class="p">,</span><span class="w">
    </span><span class="c1"># the `:sum` computation is waiting on :x and :y.   </span><span class="w">
    </span><span class="n">compute</span><span class="p" data-group-id="6224854124-5">(</span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6224854124-6">[</span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="ss">:y</span><span class="p" data-group-id="6224854124-6">]</span><span class="p">,</span><span class="w"> </span><span class="n">f_add</span><span class="p" data-group-id="6224854124-5">)</span><span class="p">,</span><span class="w">
    </span><span class="n">compute</span><span class="p" data-group-id="6224854124-7">(</span><span class="w">
      </span><span class="ss">:large_value_alert</span><span class="p">,</span><span class="w"> 
      </span><span class="n">unblocked_when</span><span class="p" data-group-id="6224854124-8">(</span><span class="w">
        </span><span class="ss">:sum</span><span class="p">,</span><span class="w"> 
        </span><span class="k" data-group-id="6224854124-9">fn</span><span class="w"> </span><span class="n">sum_node</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sum_node</span><span class="o">.</span><span class="n">set_time</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="no">nil</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">sum_node</span><span class="o">.</span><span class="n">node_value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="k" data-group-id="6224854124-9">end</span><span class="w">
      </span><span class="p" data-group-id="6224854124-8">)</span><span class="p">,</span><span class="w">
      </span><span class="k" data-group-id="6224854124-10">fn</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="6224854124-11">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;🚨&quot;</span><span class="p" data-group-id="6224854124-11">}</span><span class="w"> </span><span class="k" data-group-id="6224854124-10">end</span><span class="w">
    </span><span class="p" data-group-id="6224854124-7">)</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="6224854124-2">]</span><span class="w">
</span><span class="p" data-group-id="6224854124-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="0629374749-1">%</span><span class="nc" data-group-id="0629374749-1">Journey.Graph</span><span class="p" data-group-id="0629374749-1">{</span><span class="w">
  </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g1&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">nodes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0629374749-2">[</span><span class="w">
    </span><span class="p" data-group-id="0629374749-3">%</span><span class="nc" data-group-id="0629374749-3">Journey.Graph.Input</span><span class="p" data-group-id="0629374749-3">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:execution_id</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p" data-group-id="0629374749-3">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="0629374749-4">%</span><span class="nc" data-group-id="0629374749-4">Journey.Graph.Input</span><span class="p" data-group-id="0629374749-4">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:last_updated_at</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p" data-group-id="0629374749-4">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="0629374749-5">%</span><span class="nc" data-group-id="0629374749-5">Journey.Graph.Input</span><span class="p" data-group-id="0629374749-5">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p" data-group-id="0629374749-5">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="0629374749-6">%</span><span class="nc" data-group-id="0629374749-6">Journey.Graph.Input</span><span class="p" data-group-id="0629374749-6">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:y</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p" data-group-id="0629374749-6">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="0629374749-7">%</span><span class="nc" data-group-id="0629374749-7">Journey.Graph.Step</span><span class="p" data-group-id="0629374749-7">{</span><span class="w">
      </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w">
      </span><span class="ss">gated_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0629374749-8">[</span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="ss">:y</span><span class="p" data-group-id="0629374749-8">]</span><span class="p">,</span><span class="w">
      </span><span class="ss">f_compute</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0629374749-9">#</span><span class="nc" data-group-id="0629374749-9">Function</span><span class="p" data-group-id="0629374749-9">&lt;</span><span class="mf">42.81571850</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">:erl_eval</span><span class="o">.</span><span class="n">expr</span><span class="o">/</span><span class="mi">6</span><span class="p" data-group-id="0629374749-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">f_on_save</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:compute</span><span class="p">,</span><span class="w">
      </span><span class="ss">mutates</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">max_retries</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="ss">abandon_after_seconds</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="w">
    </span><span class="p" data-group-id="0629374749-7">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="0629374749-10">%</span><span class="nc" data-group-id="0629374749-10">Journey.Graph.Step</span><span class="p" data-group-id="0629374749-10">{</span><span class="w">
      </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:large_value_alert</span><span class="p">,</span><span class="w">
      </span><span class="ss">gated_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0629374749-11">{</span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0629374749-12">#</span><span class="nc" data-group-id="0629374749-12">Function</span><span class="p" data-group-id="0629374749-12">&lt;</span><span class="mf">42.81571850</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">:erl_eval</span><span class="o">.</span><span class="n">expr</span><span class="o">/</span><span class="mi">6</span><span class="p" data-group-id="0629374749-12">&gt;</span><span class="p" data-group-id="0629374749-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">f_compute</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0629374749-13">#</span><span class="nc" data-group-id="0629374749-13">Function</span><span class="p" data-group-id="0629374749-13">&lt;</span><span class="mf">42.81571850</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">:erl_eval</span><span class="o">.</span><span class="n">expr</span><span class="o">/</span><span class="mi">6</span><span class="p" data-group-id="0629374749-13">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">f_on_save</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:compute</span><span class="p">,</span><span class="w">
      </span><span class="ss">mutates</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">max_retries</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="ss">abandon_after_seconds</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="w">
    </span><span class="p" data-group-id="0629374749-10">}</span><span class="w">
  </span><span class="p" data-group-id="0629374749-2">]</span><span class="w">
</span><span class="p" data-group-id="0629374749-1">}</span></code></pre><h2 id="flow-visualized" class="section-heading"><a href="#flow-visualized" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Flow, visualized</span></h2><p>Here is the visual – Mermaid – representation of the graph that we have just defined.</p><p>You can see the two input values (<code class="inline">:x</code>, <code class="inline">:y</code>), the two computations (<code class="inline">:sum</code>,<code class="inline">:large_value_alert</code>), and their dependencies.</p><p>It also shows two system values, <code class="inline">:execution_id</code> and <code class="inline">:last_updated_at</code>, which are maintained by the runtime.</p><pre><code class="makeup elixir" translate="no"><span class="n">graph</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey.Tools</span><span class="o">.</span><span class="n">generate_mermaid_graph</span><span class="p" data-group-id="9452757858-1">(</span><span class="p" data-group-id="9452757858-1">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Kino.Mermaid</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="9452757858-2">(</span><span class="p" data-group-id="9452757858-2">)</span></code></pre><pre><code class="mermaid output">graph TD
    %% Graph
    subgraph Graph[&quot;🧩 'g1', version v1&quot;]
        execution_id[execution_id]
        last_updated_at[last_updated_at]
        x[x]
        y[y]
        sum[&quot;sum&lt;br/&gt;(anonymous fn)&quot;]
        large_value_alert[&quot;large_value_alert&lt;br/&gt;(anonymous fn)&quot;]

        x --&gt;  sum
        y --&gt;  sum
        sum --&gt;  large_value_alert
    end

    %% Styling
    classDef inputNode fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000000
    classDef computeNode fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000000
    classDef scheduleNode fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000000
    classDef mutateNode fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000000

    %% Apply styles to actual nodes
    class y,x,last_updated_at,execution_id inputNode
    class large_value_alert,sum computeNode</code></pre><h2 id="executing-instances-of-the-blueprint" class="section-heading"><a href="#executing-instances-of-the-blueprint" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Executing instances of the blueprint</span></h2><p>Now that we have the blueprint of the application, we can run its executions.</p><h2 id="starting-a-new-execution" class="section-heading"><a href="#starting-a-new-execution" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Starting a new execution</span></h2><p>Here is an example of starting a new execution of the graph. If the application handles a user's visit to your website, this might happen when the user lands on the web page, and, perhaps, starts engaging with it.</p><p>We'll take a note of the id of the execution, just in case everything crashes (or if the user reloads the page, or leaves and comes back in a month) and we need to reload it later.</p><pre><code class="makeup elixir" translate="no"><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="4489345982-1">(</span><span class="n">graph</span><span class="p" data-group-id="4489345982-1">)</span><span class="w">

</span><span class="c1"># Take a note of the id of the execution, so we can reload it in case the data center reboots.</span><span class="w">
</span><span class="n">execution_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">execution</span><span class="o">.</span><span class="n">id</span></code></pre><pre><code class="makeup output" translate="no"><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span></code></pre><p>The new execution doesn't have much in it at this point, nothing has been set or computed, except for the two system fields.</p><pre><code class="makeup elixir" translate="no"><span class="c1"># No values are set, except for system-provided values.</span><span class="w">
</span><span class="nc">Journey</span><span class="o">.</span><span class="n">values_all</span><span class="p" data-group-id="9468286848-1">(</span><span class="n">execution</span><span class="p" data-group-id="9468286848-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="1891727241-1">%{</span><span class="w">
  </span><span class="ss">sum</span><span class="p">:</span><span class="w"> </span><span class="ss">:not_set</span><span class="p">,</span><span class="w">
  </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="ss">:not_set</span><span class="p">,</span><span class="w">
  </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="ss">:not_set</span><span class="p">,</span><span class="w">
  </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1891727241-2">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="mi">1755833244</span><span class="p" data-group-id="1891727241-2">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1891727241-3">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p" data-group-id="1891727241-3">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">large_value_alert</span><span class="p">:</span><span class="w"> </span><span class="ss">:not_set</span><span class="w">
</span><span class="p" data-group-id="1891727241-1">}</span></code></pre><h2 id="once-x-and-y-are-provided-sum-gets-computed" class="section-heading"><a href="#once-x-and-y-are-provided-sum-gets-computed" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Once <code class="inline">:x</code> and <code class="inline">:y</code> are provided, <code class="inline">:sum</code> gets computed</span></h2><p>The user might start supplying the data:</p><pre><code class="makeup elixir" translate="no"><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="5137533013-1">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p" data-group-id="5137533013-1">)</span><span class="p">;</span><span class="w"> </span><span class="ss">:ok</span></code></pre><pre><code class="makeup output" translate="no"><span class="ss">:ok</span></code></pre><p>Btw, if the world crashed (or got redeployed, or if the user leaves), no worries.</p><p>Since we took a note of the ID of the execution, we can load the execution as soon as things are back up (or when the user comes back), and proceed as if nothing happened.</p><pre><code class="makeup elixir" translate="no"><span class="n">reloaded_execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="1360396352-1">(</span><span class="n">execution_id</span><span class="p" data-group-id="1360396352-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="6295121419-1">%</span><span class="nc" data-group-id="6295121419-1">Journey.Persistence.Schema.Execution</span><span class="p" data-group-id="6295121419-1">{</span><span class="w">
  </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-2">#</span><span class="nc" data-group-id="6295121419-2">Ecto.Schema.Metadata</span><span class="p" data-group-id="6295121419-2">&lt;</span><span class="ss">:loaded</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;executions&quot;</span><span class="p" data-group-id="6295121419-2">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g1&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">graph_version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">archived_at</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">values</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-3">[</span><span class="w">
    </span><span class="p" data-group-id="6295121419-4">%</span><span class="nc" data-group-id="6295121419-4">Journey.Persistence.Schema.Execution.Value</span><span class="p" data-group-id="6295121419-4">{</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-5">#</span><span class="nc" data-group-id="6295121419-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="6295121419-5">&lt;</span><span class="ss">:loaded</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;values&quot;</span><span class="p" data-group-id="6295121419-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;VALGLMD0YZDTBAD40LTX7G3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-6">#</span><span class="nc" data-group-id="6295121419-6">Ecto.Association.NotLoaded</span><span class="p" data-group-id="6295121419-6">&lt;</span><span class="n">association</span><span class="w"> </span><span class="ss">:execution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">loaded</span><span class="p" data-group-id="6295121419-6">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:last_updated_at</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_value</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833251</span><span class="p">,</span><span class="w">
      </span><span class="ss">set_time</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833251</span><span class="p">,</span><span class="w">
      </span><span class="ss">ex_revision</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="ss">inserted_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="p">,</span><span class="w">
      </span><span class="ss">updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833251</span><span class="w">
    </span><span class="p" data-group-id="6295121419-4">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="6295121419-7">%</span><span class="nc" data-group-id="6295121419-7">Journey.Persistence.Schema.Execution.Value</span><span class="p" data-group-id="6295121419-7">{</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-8">#</span><span class="nc" data-group-id="6295121419-8">Ecto.Schema.Metadata</span><span class="p" data-group-id="6295121419-8">&lt;</span><span class="ss">:loaded</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;values&quot;</span><span class="p" data-group-id="6295121419-8">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;VALXH5TGBT2EZ64LR26AEYX&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-9">#</span><span class="nc" data-group-id="6295121419-9">Ecto.Association.NotLoaded</span><span class="p" data-group-id="6295121419-9">&lt;</span><span class="n">association</span><span class="w"> </span><span class="ss">:execution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">loaded</span><span class="p" data-group-id="6295121419-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:x</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_value</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
      </span><span class="ss">set_time</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833251</span><span class="p">,</span><span class="w">
      </span><span class="ss">ex_revision</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="ss">inserted_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="p">,</span><span class="w">
      </span><span class="ss">updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833251</span><span class="w">
    </span><span class="p" data-group-id="6295121419-7">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="6295121419-10">%</span><span class="nc" data-group-id="6295121419-10">Journey.Persistence.Schema.Execution.Value</span><span class="p" data-group-id="6295121419-10">{</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-11">#</span><span class="nc" data-group-id="6295121419-11">Ecto.Schema.Metadata</span><span class="p" data-group-id="6295121419-11">&lt;</span><span class="ss">:loaded</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;values&quot;</span><span class="p" data-group-id="6295121419-11">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;VAL5GZB3YHBG48RX2G00AYL&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-12">#</span><span class="nc" data-group-id="6295121419-12">Ecto.Association.NotLoaded</span><span class="p" data-group-id="6295121419-12">&lt;</span><span class="n">association</span><span class="w"> </span><span class="ss">:execution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">loaded</span><span class="p" data-group-id="6295121419-12">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:execution_id</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">set_time</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="p">,</span><span class="w">
      </span><span class="ss">ex_revision</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="ss">inserted_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="p">,</span><span class="w">
      </span><span class="ss">updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="w">
    </span><span class="p" data-group-id="6295121419-10">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="6295121419-13">%</span><span class="nc" data-group-id="6295121419-13">Journey.Persistence.Schema.Execution.Value</span><span class="p" data-group-id="6295121419-13">{</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-14">#</span><span class="nc" data-group-id="6295121419-14">Ecto.Schema.Metadata</span><span class="p" data-group-id="6295121419-14">&lt;</span><span class="ss">:loaded</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;values&quot;</span><span class="p" data-group-id="6295121419-14">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;VAL3HT5MMBTHX7TXD93D2A0&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-15">#</span><span class="nc" data-group-id="6295121419-15">Ecto.Association.NotLoaded</span><span class="p" data-group-id="6295121419-15">&lt;</span><span class="n">association</span><span class="w"> </span><span class="ss">:execution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">loaded</span><span class="p" data-group-id="6295121419-15">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:y</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_value</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">set_time</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">ex_revision</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="ss">inserted_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="p">,</span><span class="w">
      </span><span class="ss">updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="w">
    </span><span class="p" data-group-id="6295121419-13">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="6295121419-16">%</span><span class="nc" data-group-id="6295121419-16">Journey.Persistence.Schema.Execution.Value</span><span class="p" data-group-id="6295121419-16">{</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-17">#</span><span class="nc" data-group-id="6295121419-17">Ecto.Schema.Metadata</span><span class="p" data-group-id="6295121419-17">&lt;</span><span class="ss">:loaded</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;values&quot;</span><span class="p" data-group-id="6295121419-17">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;VALM10Z0R5VHJDA7VJL68G9&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-18">#</span><span class="nc" data-group-id="6295121419-18">Ecto.Association.NotLoaded</span><span class="p" data-group-id="6295121419-18">&lt;</span><span class="n">association</span><span class="w"> </span><span class="ss">:execution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">loaded</span><span class="p" data-group-id="6295121419-18">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:compute</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_value</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">set_time</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">ex_revision</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="ss">inserted_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="p">,</span><span class="w">
      </span><span class="ss">updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="w">
    </span><span class="p" data-group-id="6295121419-16">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="6295121419-19">%</span><span class="nc" data-group-id="6295121419-19">Journey.Persistence.Schema.Execution.Value</span><span class="p" data-group-id="6295121419-19">{</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-20">#</span><span class="nc" data-group-id="6295121419-20">Ecto.Schema.Metadata</span><span class="p" data-group-id="6295121419-20">&lt;</span><span class="ss">:loaded</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;values&quot;</span><span class="p" data-group-id="6295121419-20">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;VALGJGJA9A860BB3JH59YY9&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-21">#</span><span class="nc" data-group-id="6295121419-21">Ecto.Association.NotLoaded</span><span class="p" data-group-id="6295121419-21">&lt;</span><span class="n">association</span><span class="w"> </span><span class="ss">:execution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">loaded</span><span class="p" data-group-id="6295121419-21">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:large_value_alert</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:compute</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_value</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">set_time</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">ex_revision</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="ss">inserted_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="p">,</span><span class="w">
      </span><span class="ss">updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="w">
    </span><span class="p" data-group-id="6295121419-19">}</span><span class="w">
  </span><span class="p" data-group-id="6295121419-3">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">computations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-22">[</span><span class="w">
    </span><span class="p" data-group-id="6295121419-23">%</span><span class="nc" data-group-id="6295121419-23">Journey.Persistence.Schema.Execution.Computation</span><span class="p" data-group-id="6295121419-23">{</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-24">#</span><span class="nc" data-group-id="6295121419-24">Ecto.Schema.Metadata</span><span class="p" data-group-id="6295121419-24">&lt;</span><span class="ss">:loaded</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;computations&quot;</span><span class="p" data-group-id="6295121419-24">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CMPR0Y39G6ARJYG37T4G9G3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-25">#</span><span class="nc" data-group-id="6295121419-25">Ecto.Association.NotLoaded</span><span class="p" data-group-id="6295121419-25">&lt;</span><span class="n">association</span><span class="w"> </span><span class="ss">:execution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">loaded</span><span class="p" data-group-id="6295121419-25">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w">
      </span><span class="ss">computation_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:compute</span><span class="p">,</span><span class="w">
      </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="ss">:not_set</span><span class="p">,</span><span class="w">
      </span><span class="ss">ex_revision_at_start</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">ex_revision_at_completion</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">scheduled_time</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">start_time</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">completion_time</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">deadline</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">error_details</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">computed_with</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">inserted_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="p">,</span><span class="w">
      </span><span class="ss">updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="w">
    </span><span class="p" data-group-id="6295121419-23">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="6295121419-26">%</span><span class="nc" data-group-id="6295121419-26">Journey.Persistence.Schema.Execution.Computation</span><span class="p" data-group-id="6295121419-26">{</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-27">#</span><span class="nc" data-group-id="6295121419-27">Ecto.Schema.Metadata</span><span class="p" data-group-id="6295121419-27">&lt;</span><span class="ss">:loaded</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;computations&quot;</span><span class="p" data-group-id="6295121419-27">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CMPZ1T53HMV6LYRA3GY7G5R&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">execution</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6295121419-28">#</span><span class="nc" data-group-id="6295121419-28">Ecto.Association.NotLoaded</span><span class="p" data-group-id="6295121419-28">&lt;</span><span class="n">association</span><span class="w"> </span><span class="ss">:execution</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">loaded</span><span class="p" data-group-id="6295121419-28">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:large_value_alert</span><span class="p">,</span><span class="w">
      </span><span class="ss">computation_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:compute</span><span class="p">,</span><span class="w">
      </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="ss">:not_set</span><span class="p">,</span><span class="w">
      </span><span class="ss">ex_revision_at_start</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">ex_revision_at_completion</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">scheduled_time</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">start_time</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">completion_time</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">deadline</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">error_details</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">computed_with</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
      </span><span class="ss">inserted_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="p">,</span><span class="w">
      </span><span class="ss">updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="w">
    </span><span class="p" data-group-id="6295121419-26">}</span><span class="w">
  </span><span class="p" data-group-id="6295121419-22">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">revision</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="ss">inserted_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833244</span><span class="p">,</span><span class="w">
  </span><span class="ss">updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833251</span><span class="w">
</span><span class="p" data-group-id="6295121419-1">}</span></code></pre><p>The user is supplying the other input:</p><pre><code class="makeup elixir" translate="no"><span class="n">reloaded_execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="1103850265-1">(</span><span class="n">reloaded_execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:y</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1103850265-1">)</span><span class="p">;</span><span class="w"> </span><span class="ss">:ok</span></code></pre><pre><code class="makeup output" translate="no"><span class="ss">:ok</span></code></pre><p>Now that both <code class="inline">:x</code> and <code class="inline">:y</code> have been supplied, <code class="inline">:sum</code> gets computed. Here is the state attached to the execution:</p><p>(Note: since <code class="inline">:sum</code> is &quot;small&quot;,  <code class="inline">:large_value_alert</code> does not get set (thanks to the condition we defined in the graph for this node.)</p><pre><code class="makeup elixir" translate="no"><span class="nc">Journey</span><span class="o">.</span><span class="n">values_all</span><span class="p" data-group-id="5609147366-1">(</span><span class="n">reloaded_execution</span><span class="p" data-group-id="5609147366-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="5706684934-1">%{</span><span class="w">
  </span><span class="ss">sum</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5706684934-2">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p" data-group-id="5706684934-2">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5706684934-3">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="5706684934-3">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5706684934-4">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p" data-group-id="5706684934-4">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5706684934-5">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="mi">1755833255</span><span class="p" data-group-id="5706684934-5">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5706684934-6">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p" data-group-id="5706684934-6">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">large_value_alert</span><span class="p">:</span><span class="w"> </span><span class="ss">:not_set</span><span class="w">
</span><span class="p" data-group-id="5706684934-1">}</span></code></pre><p>Can also get specific values:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="2009881997-1">(</span><span class="n">reloaded_execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="2009881997-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="2278270623-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p" data-group-id="2278270623-1">}</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="3127632801-1">(</span><span class="n">reloaded_execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:large_value_alert</span><span class="p" data-group-id="3127632801-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="3822975236-1">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="3822975236-1">}</span></code></pre><h2 id="bigger-x-bigger-sum-large_value_alert" class="section-heading"><a href="#bigger-x-bigger-sum-large_value_alert" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Bigger <code class="inline">:x</code> -&gt; bigger <code class="inline">:sum</code> -&gt; <code class="inline">:large_value_alert</code> 🚨!!</span></h2><p>If an input value changes, the downstream nodes get re-evaluated.</p><pre><code class="makeup elixir" translate="no"><span class="n">reloaded_execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="3672341076-1">(</span><span class="n">reloaded_execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="mi">133</span><span class="p" data-group-id="3672341076-1">)</span><span class="p">;</span><span class="w"> </span><span class="ss">:ok</span></code></pre><pre><code class="makeup output" translate="no"><span class="ss">:ok</span></code></pre><p>&quot;no worries, here is the updated sum&quot;</p><pre><code class="makeup elixir" translate="no"><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="5973565366-1">(</span><span class="n">reloaded_execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_new</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="5973565366-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="1459768849-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">135</span><span class="p" data-group-id="1459768849-1">}</span></code></pre><p>The updated <code class="inline">:x</code> pushes <code class="inline">:sum</code> over the threshold that triggers <code class="inline">:large_value_alert</code>:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="8567046793-1">(</span><span class="n">reloaded_execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:large_value_alert</span><span class="p" data-group-id="8567046793-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="5808672397-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;🚨&quot;</span><span class="p" data-group-id="5808672397-1">}</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">reloaded_execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="7595554275-1">(</span><span class="n">reloaded_execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="7595554275-1">)</span><span class="p">;</span><span class="w"> </span><span class="ss">:ok</span></code></pre><pre><code class="makeup output" translate="no"><span class="ss">:ok</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="3379420499-1">(</span><span class="n">reloaded_execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_new</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="3379420499-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="2217311407-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="2217311407-1">}</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="6077529417-1">(</span><span class="n">reloaded_execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:large_value_alert</span><span class="p" data-group-id="6077529417-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="4373712820-1">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="4373712820-1">}</span></code></pre><p>This basic computation happened with persistence, resiliency, and scalability.</p><h2 id="searching-through-executions" class="section-heading"><a href="#searching-through-executions" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Searching through executions</span></h2><p>You can search the database for execution records, querying by specific values, with sorting, limits and pagination:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="9161651838-1">(</span><span class="w">
  </span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w">
  </span><span class="ss">graph_version</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">version</span><span class="p">,</span><span class="w">
  </span><span class="ss">order_by_execution_fields</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9161651838-2">[</span><span class="ss">:inserted_at</span><span class="p" data-group-id="9161651838-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">filter_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9161651838-3">[</span><span class="p" data-group-id="9161651838-4">{</span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="ss">:gt</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="9161651838-4">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9161651838-5">{</span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="ss">:lt</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="9161651838-5">}</span><span class="p" data-group-id="9161651838-3">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p" data-group-id="9161651838-1">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="9161651838-6">(</span><span class="k" data-group-id="9161651838-7">fn</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values</span><span class="p" data-group-id="9161651838-8">(</span><span class="n">e</span><span class="p" data-group-id="9161651838-8">)</span><span class="w">
</span><span class="k" data-group-id="9161651838-7">end</span><span class="p" data-group-id="9161651838-6">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="4253424051-1">[</span><span class="w">
  </span><span class="p" data-group-id="4253424051-2">%{</span><span class="ss">sum</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755826416</span><span class="p">,</span><span class="w"> </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECV9Z60T26H0AY5BT50M6G&quot;</span><span class="p" data-group-id="4253424051-2">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="4253424051-3">%{</span><span class="ss">sum</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755827033</span><span class="p">,</span><span class="w"> </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECYGV60454G29YD84R2X14&quot;</span><span class="p" data-group-id="4253424051-3">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="4253424051-4">%{</span><span class="ss">sum</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755828575</span><span class="p">,</span><span class="w"> </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECXDGXZ01MT5915MJD984L&quot;</span><span class="p" data-group-id="4253424051-4">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="4253424051-5">%{</span><span class="ss">sum</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755830344</span><span class="p">,</span><span class="w"> </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECAE6861D337HRL9AY4J5Z&quot;</span><span class="p" data-group-id="4253424051-5">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="4253424051-6">%{</span><span class="ss">sum</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755831312</span><span class="p">,</span><span class="w"> </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXEC03G5YMTV1TDVT75DTE9M&quot;</span><span class="p" data-group-id="4253424051-6">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="4253424051-7">%{</span><span class="ss">sum</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1755833269</span><span class="p">,</span><span class="w"> </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXECLG0R2MD2JBARMVRE380L&quot;</span><span class="p" data-group-id="4253424051-7">}</span><span class="w">
</span><span class="p" data-group-id="4253424051-1">]</span></code></pre><h2 id="system-status-health-stats" class="section-heading"><a href="#system-status-health-stats" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">System Status: health, stats</span></h2><p>You can find the stats of the system: the executions what graphs are running, how many are there, and what is happening, generally.</p><p>This is a general &quot;high level stats and health check&quot;.</p><!-- livebook:{"break_markdown":true} --><p>System stats, as a human friendly text:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Journey.Insights.Status</span><span class="o">.</span><span class="n">status</span><span class="p" data-group-id="9175293859-1">(</span><span class="p" data-group-id="9175293859-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey.Insights.Status</span><span class="o">.</span><span class="n">to_text</span><span class="p" data-group-id="9175293859-2">(</span><span class="p" data-group-id="9175293859-2">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="9175293859-3">(</span><span class="p" data-group-id="9175293859-3">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="nc">System</span><span class="w"> </span><span class="ss">Status</span><span class="p">:</span><span class="w"> </span><span class="nc">HEALTHY</span><span class="w">
</span><span class="ss">Database</span><span class="p">:</span><span class="w"> </span><span class="nc">Connected</span><span class="w">
</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">===</span><span class="o">==</span><span class="w">

</span><span class="nc">GRAPHS</span><span class="w"> </span><span class="p" data-group-id="0826637204-1">(</span><span class="mi">1</span><span class="w"> </span><span class="n">total</span><span class="p" data-group-id="0826637204-1">)</span><span class="p">:</span><span class="w">
</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="w">
</span><span class="ss">Name</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;g1&#39;</span><span class="w">
</span><span class="ss">Version</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;v1&#39;</span><span class="w">
</span><span class="ss">Executions</span><span class="p">:</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="ss">active</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="ss">archived</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="nc">First</span><span class="w"> </span><span class="ss">activity</span><span class="p">:</span><span class="w"> </span><span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">22</span><span class="nc">T03</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">24</span><span class="nc">Z</span><span class="w">
</span><span class="nc">Last</span><span class="w"> </span><span class="ss">activity</span><span class="p">:</span><span class="w"> </span><span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">22</span><span class="nc">T03</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">49</span><span class="nc">Z</span><span class="w">
</span><span class="ss">Computations</span><span class="p">:</span><span class="w">
</span><span class="err">✓</span><span class="w"> </span><span class="ss">success</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="w">
</span><span class="err">◯</span><span class="w"> </span><span class="ss">not_set</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
</span></code></pre><pre><code class="makeup output" translate="no"><span class="ss">:ok</span></code></pre><p>System stats, as a code-friendly data structure:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Journey.Insights.Status</span><span class="o">.</span><span class="n">status</span><span class="p" data-group-id="4862942341-1">(</span><span class="p" data-group-id="4862942341-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="0684362097-1">%{</span><span class="w">
  </span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:healthy</span><span class="p">,</span><span class="w">
  </span><span class="ss">graphs</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0684362097-2">[</span><span class="w">
    </span><span class="p" data-group-id="0684362097-3">%{</span><span class="w">
      </span><span class="ss">stats</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0684362097-4">%{</span><span class="w">
        </span><span class="ss">computations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0684362097-5">%{</span><span class="w">
          </span><span class="ss">by_state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0684362097-6">%{</span><span class="ss">abandoned</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">cancelled</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">success</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="ss">failed</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">not_set</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="ss">computing</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="0684362097-6">}</span><span class="p">,</span><span class="w">
          </span><span class="ss">most_recently_created</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-08-22T03:27:49Z&quot;</span><span class="p">,</span><span class="w">
          </span><span class="ss">most_recently_updated</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-08-22T03:27:49Z&quot;</span><span class="w">
        </span><span class="p" data-group-id="0684362097-5">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">executions</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0684362097-7">%{</span><span class="w">
          </span><span class="ss">active</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
          </span><span class="ss">archived</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="ss">most_recently_created</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-08-22T03:27:24Z&quot;</span><span class="p">,</span><span class="w">
          </span><span class="ss">most_recently_updated</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-08-22T03:27:49Z&quot;</span><span class="w">
        </span><span class="p" data-group-id="0684362097-7">}</span><span class="w">
      </span><span class="p" data-group-id="0684362097-4">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">graph_version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1&quot;</span><span class="w">
    </span><span class="p" data-group-id="0684362097-3">}</span><span class="w">
  </span><span class="p" data-group-id="0684362097-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">database_connected</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="0684362097-1">}</span></code></pre><h2 id="flow-analytics-see-user-s-progression" class="section-heading"><a href="#flow-analytics-see-user-s-progression" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Flow Analytics: see user's progression</span></h2><p>Since every data-setting operation touches the execution, Journey can provide stats on what is happening in the system. What percentage of users reached <code class="inline">:x</code>, what percentage of users reached <code class="inline">:y</code>, etc.</p><p>In a way, this is not unlike funnel analytics for the application defined by the graph.</p><!-- livebook:{"break_markdown":true} --><p>&quot;Flow Analytics&quot; as a human-friendly text.</p><pre><code class="makeup elixir" translate="no"><span class="nc">Journey.Insights.FlowAnalytics</span><span class="o">.</span><span class="n">flow_analytics</span><span class="p" data-group-id="1234858572-1">(</span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">version</span><span class="p" data-group-id="1234858572-1">)</span><span class="w"> 
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey.Insights.FlowAnalytics</span><span class="o">.</span><span class="n">to_text</span><span class="p" data-group-id="1234858572-2">(</span><span class="p" data-group-id="1234858572-2">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="1234858572-3">(</span><span class="p" data-group-id="1234858572-3">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="ss">Graph</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;g1&#39;</span><span class="w">
</span><span class="ss">Version</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;v1&#39;</span><span class="w">
</span><span class="nc">Analyzed</span><span class="w"> </span><span class="ss">at</span><span class="p">:</span><span class="w"> </span><span class="mi">2025</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">22</span><span class="nc">T03</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mf">01.343599</span><span class="nc">Z</span><span class="w">

</span><span class="nc">EXECUTION</span><span class="w"> </span><span class="ss">STATS</span><span class="p">:</span><span class="w">
</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="w">
</span><span class="nc">Total</span><span class="w"> </span><span class="ss">executions</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
</span><span class="nc">Average</span><span class="w"> </span><span class="ss">duration</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">seconds</span><span class="w">
</span><span class="nc">Median</span><span class="w"> </span><span class="ss">duration</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">second</span><span class="w">

</span><span class="nc">NODE</span><span class="w"> </span><span class="nc">STATS</span><span class="w"> </span><span class="p" data-group-id="7948114091-1">(</span><span class="mi">3</span><span class="w"> </span><span class="n">nodes</span><span class="p" data-group-id="7948114091-1">)</span><span class="p">:</span><span class="w">
</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="o">--</span><span class="w">
</span><span class="nc">Node</span><span class="w"> </span><span class="ss">Name</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;sum&#39;</span><span class="w">
</span><span class="ss">Type</span><span class="p">:</span><span class="w"> </span><span class="n">compute</span><span class="w">
</span><span class="nc">Reached</span><span class="w"> </span><span class="ss">by</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">executions</span><span class="w"> </span><span class="p" data-group-id="7948114091-2">(</span><span class="mf">100.0</span><span class="p">%</span><span class="p" data-group-id="7948114091-2">)</span><span class="w">
</span><span class="nc">Average</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ss">reach</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">seconds</span><span class="w">
</span><span class="nc">Flow</span><span class="w"> </span><span class="n">ends</span><span class="w"> </span><span class="ss">here</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">executions</span><span class="w"> </span><span class="p" data-group-id="7948114091-3">(</span><span class="mf">0.0</span><span class="p">%</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">all</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">%</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">reached</span><span class="p" data-group-id="7948114091-3">)</span><span class="w">

</span><span class="nc">Node</span><span class="w"> </span><span class="ss">Name</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;x&#39;</span><span class="w">
</span><span class="ss">Type</span><span class="p">:</span><span class="w"> </span><span class="n">input</span><span class="w">
</span><span class="nc">Reached</span><span class="w"> </span><span class="ss">by</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">executions</span><span class="w"> </span><span class="p" data-group-id="7948114091-4">(</span><span class="mf">100.0</span><span class="p">%</span><span class="p" data-group-id="7948114091-4">)</span><span class="w">
</span><span class="nc">Average</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ss">reach</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">seconds</span><span class="w">
</span><span class="nc">Flow</span><span class="w"> </span><span class="n">ends</span><span class="w"> </span><span class="ss">here</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">executions</span><span class="w"> </span><span class="p" data-group-id="7948114091-5">(</span><span class="mf">0.0</span><span class="p">%</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">all</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">%</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">reached</span><span class="p" data-group-id="7948114091-5">)</span><span class="w">

</span><span class="nc">Node</span><span class="w"> </span><span class="ss">Name</span><span class="p">:</span><span class="w"> </span><span class="sc">&#39;y&#39;</span><span class="w">
</span><span class="ss">Type</span><span class="p">:</span><span class="w"> </span><span class="n">input</span><span class="w">
</span><span class="nc">Reached</span><span class="w"> </span><span class="ss">by</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">executions</span><span class="w"> </span><span class="p" data-group-id="7948114091-6">(</span><span class="mf">100.0</span><span class="p">%</span><span class="p" data-group-id="7948114091-6">)</span><span class="w">
</span><span class="nc">Average</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="ss">reach</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">seconds</span><span class="w">
</span><span class="nc">Flow</span><span class="w"> </span><span class="n">ends</span><span class="w"> </span><span class="ss">here</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">executions</span><span class="w"> </span><span class="p" data-group-id="7948114091-7">(</span><span class="mf">0.0</span><span class="p">%</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">all</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">%</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">reached</span><span class="p" data-group-id="7948114091-7">)</span><span class="w">
</span></code></pre><pre><code class="makeup output" translate="no"><span class="ss">:ok</span></code></pre><p>&quot;Flow Analytics&quot; as a code-friendly datastructure.</p><pre><code class="makeup elixir" translate="no"><span class="c1"># get some analytics for the executions flowing through the system: how many, what does the funnel look like</span><span class="w">
</span><span class="nc">Journey.Insights.FlowAnalytics</span><span class="o">.</span><span class="n">flow_analytics</span><span class="p" data-group-id="7818854965-1">(</span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">version</span><span class="p" data-group-id="7818854965-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="4586505973-1">%{</span><span class="w">
  </span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g1&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">graph_version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">node_stats</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4586505973-2">%{</span><span class="w">
    </span><span class="ss">nodes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4586505973-3">[</span><span class="w">
      </span><span class="p" data-group-id="4586505973-4">%{</span><span class="w">
        </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:compute</span><span class="p">,</span><span class="w">
        </span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w">
        </span><span class="ss">reached_count</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="ss">reached_percentage</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span><span class="w">
        </span><span class="ss">average_time_to_reach</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="ss">flow_ends_here_count</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="ss">flow_ends_here_percentage_of_all</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="ss">flow_ends_here_percentage_of_reached</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
      </span><span class="p" data-group-id="4586505973-4">}</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4586505973-5">%{</span><span class="w">
        </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p">,</span><span class="w">
        </span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:x</span><span class="p">,</span><span class="w">
        </span><span class="ss">reached_count</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="ss">reached_percentage</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span><span class="w">
        </span><span class="ss">average_time_to_reach</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="ss">flow_ends_here_count</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="ss">flow_ends_here_percentage_of_all</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="ss">flow_ends_here_percentage_of_reached</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
      </span><span class="p" data-group-id="4586505973-5">}</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4586505973-6">%{</span><span class="w">
        </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p">,</span><span class="w">
        </span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:y</span><span class="p">,</span><span class="w">
        </span><span class="ss">reached_count</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="ss">reached_percentage</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span><span class="w">
        </span><span class="ss">average_time_to_reach</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="ss">flow_ends_here_count</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="ss">flow_ends_here_percentage_of_all</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="ss">flow_ends_here_percentage_of_reached</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
      </span><span class="p" data-group-id="4586505973-6">}</span><span class="w">
    </span><span class="p" data-group-id="4586505973-3">]</span><span class="w">
  </span><span class="p" data-group-id="4586505973-2">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">analyzed_at</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-08-22T03:28:04.202091Z&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">executions</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4586505973-7">%{</span><span class="w">
    </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="ss">duration_median_seconds_to_last_update</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="ss">duration_avg_seconds_to_last_update</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="w">
  </span><span class="p" data-group-id="4586505973-7">}</span><span class="w">
</span><span class="p" data-group-id="4586505973-1">}</span></code></pre><h2 id="in-summary" class="section-heading"><a href="#in-summary" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">In summary</span></h2><p>This showed:</p><ul><li>an application defined as a graph + business logic (the function attached to <code class="inline">compute</code> nodes),</li><li>an execution of the flow take place, step by step,</li><li>an execution of the flow be interrupted and resumed, as if nothing happened,</li><li>analytics describing the &quot;funnel&quot; of executions of your graph,</li></ul><p>Behind the scenes (not visible in this simple example):</p><ul><li>computations were subject to a retry policy and retries in case of failures,</li><li>computations scale seamlessly: they run on any replica of your application.</li></ul><p>This all happened without application data getting shipped to a third party, or requiring a SAAS dependency.</p><p>See <a href="https://hexdocs.pm/journey">Journey documentation</a> for examples of more complex applications (e.g. a Horoscope app, or a Credit Card Application flow, which includes Mutations, and one-time and recurring Scheduled events).</p><!-- livebook:{"offset":20603,"stamp":{"token":"XCP.FG0kKFoVSriLtgqWKPOkvDH9_7Iz6tAdScMYylbjg3wEkLrG6ZYjqW2-Q318JAgzv1rsW0meHAOyvqWuRIg_NNBX6Kx3uaX3S8A_mveoVcJo9W-K1FLSpqdJ","version":2}} -->

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="migration_strategy.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Updating Graphs
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

  </div>
</div>
    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/journey/0.10.31" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/journey/0.10.31">Hex Preview</a>

              (<a href="https://preview.hex.pm/preview/journey/0.10.31/show/lib/examples/basic.livemd">current file</a>)

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Journey.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
